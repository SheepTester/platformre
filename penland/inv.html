<!DOCTYPE html>
<html>
  <head>
    <title>Penland Inventory test</title>
    <meta charset="UTF-8">
    <meta property="og:image" content="https://sheeptester.github.io/img/penland-smaller.png">
    <style>
body {
  font-family: monospace;
  background: black;
  color: white;
}
p {
  position: fixed;
  z-index: 100;
}
#stage, #cover, #player, #cursor, #inv {
  height: 360px;
  width: 480px;
  position: fixed;
  margin: auto;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
#stage {
  background: #CEECFF;
}
.block {
  position: absolute;
  height: 16px;
}
#cover {
  box-shadow: 0 0 0 99999px black;
  cursor: none;
}
#player {
  background: #673AB7;
  height: 32px;
  width: 16px;
}
#cursor {
  height: 16px;
  width: 16px;
}
#inv ul {
  margin: 0;
  padding: 0;
}
#inv .invSlot {
  background: rgba(0,0,0,0.1);
  display: block;
  height: 40px;
  width: 40px;
  border-radius: 20px;
  float: left;
  margin: 2.5px;
}
#inv .invSlot, .hand, .handd {
  -webkit-text-fill-color: white;
  -webkit-text-stroke-width: 0.5px;
  -webkit-text-stroke-color: black;
  text-align: center;
  font-size: 13px;
  background-size: 40px;
  background-repeat: no-repeat;
  background-position: center;
}
#inv .invname:first-child {
  -webkit-text-fill-color: white;
  -webkit-text-stroke-width: 1px;
  -webkit-text-stroke-color: black;
}
#inv #availables p {
  margin: 0;
  position: static;
}
#inv .invSlot:hover {
  background: rgba(0,0,0,0.3);
}
#inv .block {
  width: 16px;
  top: 4px;
  transform: scale(1.5);
  left: 12px;
  position: relative;
}
#inv #info, #inv #availables {
  background: rgba(0,0,0,0.1);
  right: 0;
  height: 290px;
  width: 220px;
  margin: 10px;
  border-radius: 5px;
  position: absolute;
  overflow-y: auto;
}
#inv #info #tabs {
  display:-webkit-flex;
  -webkit-justify-content:center;
  display:flex;
  justify-content:center;
}
#inv #info:hover, #inv #availables:hover {
  background: rgba(0,0,0,0.3);
}
#inv #info #tabs li {
  display: inline-block;
  background: rgba(255,255,255,0.2);
  height: 40px;
  -webkit-flex:1;
  flex: 1;
  background-size: 40px;
  background-repeat: no-repeat;
  background-position: center;
}
#inv #info #tabs li:hover, #inv #info #tabs .active {
  background: rgba(255,255,255,0.5);
  background-size: 40px;
  background-repeat: no-repeat;
  background-position: center;
}
#inv #info #tabs #inf {background-image: url(materialicon_info_outline.svg);border-top-left-radius: 5px;}
#inv #info #tabs #craft {background-image: url(materialicon_build.svg);}
#inv #info #tabs #clothes {background-image: url(shirt.svg);}
#inv #info #tabs #menu {background-image: url(materialicon_view_list.svg);border-top-right-radius: 5px;}
#inv #info #content, #inv #availables li {
  background: rgba(0,0,0,0.1);
  background-size: 100%;
  background-repeat: no-repeat;
  background-position: center;
}
#inv #availables li:hover {
  background: rgba(0,0,0,0.2);
  background-size: 100%;
  background-repeat: no-repeat;
  background-position: center;
}
#inv #info #content h1, #inv #availables h1 {margin: 0;}
#inv #info #content img {width: 100%;}
.hand, .handd {
  background-color: rgba(0,0,0,0.1);
  bottom: 0;
  height: 40px;
  width: 40px;
  margin: 10px;
  border-radius: 5px;
  position: absolute;
}
.hand {
  width: 105px;
}
#inv #availables li {display:block;}
#inv #availables li:first-child {
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}
#inv #availables li:last-child {
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
}
#preview {
  position: fixed;
  margin: auto;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  transform: scale(2);
  image-rendering: pixelated;
}
#previewbutton {
  background: #333;
	font-size: inherit;
	font-family: inherit;
  color: white;
  border: none;
  cursor: pointer;
}
#previewbutton:hover {
  background: #444;
}
#previewbutton:active {
  background: #222;
}
/*#inv .hand:hover {background-color: rgba(0,0,0,0.3);}*/
#uno {right: 45px;}
#one {right: 115px;}
#two {right: 0;}
#stats {
  margin: 0;
  padding: 0;
  position: absolute;
  bottom: 0;
}
#stats li {
  display: block;
  width: 0;
  height: 5px;
  margin: 2px;
  border-left-width: 50px;
  border-left-style: solid;
  border-right-width: 0px;
  border-right-style: solid;
}
#health {border-left-color:rgba(244,67,54,0.8);border-right-color:rgba(244,67,54,0.2);}
#oxygen {border-left-color:rgba(3,169,244,0.8);border-right-color:rgba(3,169,244,0.2);}
#hunger {border-left-color:rgba(173,132,44,0.8);border-right-color:rgba(173,132,44,0.2);}
#thirst {border-left-color:rgba(63,111,181,0.8);border-right-color:rgba(63,111,181,0.2);}
#label {
  color: white;
  text-shadow: 0 0 3px rgba(0,0,0,0.3);
  margin: 0;
  width: 100%;
  text-align: center;
  position: absolute;
  bottom: 0;
}
.grass {background: #866247;background-image: url(grass.svg);}
.dirt {background: #866247;}
.reinforceddiamond {background: #212121;}
.tallgrass {background-image: url(tallgrass.svg);}
.oaktrunk {background: #74674F;}
.oaktreaves {background: #719C34;}
.oakleaves {background: #82B53C;}
.pinetrunk {background: #4E342E;}
.pinetreaves {background: #304D07;}
.pineleaves {background: #406609;}
.auttrunk {background: #9E715C;}
.aut1treaves {background: #C0412A;}
.aut1leaves {background: #D84830;}
.aut2treaves {background: #D78241;}
.aut2leaves {background: #F09048;}
.aut3treaves {background: #D7AC56;}
.aut3leaves {background: #F0C060;}
.sand {background: #EED38B;}
.water {background: #A7DBD8;}
.rose {background-image: url(rose.svg);}
.goldenrod {background-image: url(goldenrod.svg);}
.myosotis {background-image: url(myosotis.svg);}
.feore {background: #BA603B;background-image: url(ore.svg);}
.auore {background: #D2A70B;background-image: url(ore.svg);}
.cuore {background: #558674;background-image: url(ore.svg);}
.poore {background: #AC584B;background-image: url(ore.svg);}
.coal {background: #222;background-image: url(ore.svg);}
.sulfur {background: #EEE692;background-image: url(ore.svg);}
.assembler {background-image: url(items/assembler.svg);}
.grasspile {background: #1B8505;}
.grassblock {background: #166C04;}
.toughgrass {background: #105203;}
.melter {background-image: url(items/melter.svg);}
.lava {background: #FF6015;}
.acid {background: #00FF00;}
.heal {background: #F06292;}
.oaksapling {background-image: url(items/oaksap.svg);}
.pinesapling {background-image: url(items/pinesap.svg);}
.autumnsapling {background-image: url(items/autsap.svg);}
.vapour {background: white;}
.acidproof {background: #799779;}
.acidvapour {background: #CDFFCD;}
.seawater {background: #69D2E7;}
.contaminatedwater {background: #5FBFF3;}
.smoke {background: #D7DACF;}
.flare {background: #FFF700;}
.explosive {background: #92002C;}
.explosive2 {background: #FF0451;}
.fire {background: #FF6540;}
.palmtrunk {background: #D1BE94;}
.palmtreaves {background: #87BB25;}
.palmleaves {background: #99D42A;}
.palmsapling {background-image: url(items/palmsap.svg);}
.seaweed {background: #1B4201;}
.basalt {background: #8A796C;}
.granite {background: #C5BA80;}
.limestone {background: #B7C0A9;}
.basaltgravel {background: #A48F80;}
.granitegravel {background: #DFD291;}
.limestonegravel {background: #D0DABF;}
.charcoal {background: #444;}
.urine {background: #fbce26;}
.feces {background: #593318;}
.compost {background: #38312F;}
    </style>
  </head>
  <body>
    <p>WASD to move. Q is left hand, E is right hand. Mouse to select blocks. 3 opens inventory and closes menus. In an inventory, use Q and E while hovering over a slot to equip it to the corresponding hand. <a href="#lolnotyet">Next</a></p>
    <div id="stage"></div>
    <img id="cursor" src="cursor.svg"/>
    <div id="player"></div>
    <div id="cover">
      <ul id='stats'>
        <li id='health'></li>
        <li id='oxygen'></li>
        <li id='hunger'></li>
        <li id='thirst'></li>
      </ul>
      <p id='label'></p>
    </div>
    <div id="inv"><div class='handd' id='uno'></div><div class='handd' id='two'></div></div>

    <script src="../../sheep.js"></script>
    <script src="previewworld.js"></script>
    <script>
var level,loop,
mX=0,mY=0, // cursor pos
lW=300,lH=200, // level size
sX=lW*8-240,sY=lH*8-240, // scroll
pausd=true,mineInfo=[],
wD=false,aD=false,dD=false,sD=false,spD=false,qD=false,eD=false,twoD=false,
xv=0,yv=0,x=sX,y=sY,cX,cY,
blockData={
  /* trnsp:transparent, mineTime:time it takes to mine in seconds w/o tools, liquid, grainy:affected by gravity, drops:items added to inventory when mined, furn:has a menu,
  tool:correct tool 1-drill 2-bucket 3-saw 4-scissors 5-shovel, acidproof:undestroyable by acid */
  air:{trnsp:1,groundCover:1,mineTime:-1,drops:{},acidproof:1,back:'CEECFF',fireproof:1},
  grass:{mineTime:0.5,grainy:1,drops:{dirt:1,grass:1},tool:5,back:'1F9D06',fireproof:1},
  dirt:{mineTime:0.5,grainy:1,drops:{dirt:1},tool:5,back:'866247',fireproof:1},
  basalt:{mineTime:3,drops:{basalt:4},tool:1,back:'8A796C',fireproof:1},
  granite:{mineTime:3,drops:{granite:4},tool:1,back:'C5BA80',fireproof:1},
  limestone:{mineTime:3,drops:{limestone:4},tool:1,back:'B7C0A9',fireproof:1},
  reinforceddiamond:{mineTime:-1,drops:{},acidproof:1,back:'212121',explosionproof:1,fireproof:1},
  tallgrass:{trnsp:1,mineTime:0.1,groundCover:1,drops:{grass:"1-2"},tool:4,back:'1F9D06'},
  oaktrunk:{grainy:1,mineTime:1,drops:{wood:"1-4"},tool:3,back:'74674F'},
  oaktreaves:{grainy:"treaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",oaksapling:"0-1"},tool:4,back:'719C34'},
  oakleaves:{grainy:"leaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",oaksapling:"0-1"},trnsp:1,tool:4,back:'82B53C'},
  pinetrunk:{grainy:1,mineTime:1,drops:{wood:"1-4"},tool:3,back:'4E342E'},
  pinetreaves:{grainy:"treaves",mineTime:0.5,drops:{pineneedle:"2-5",stick:"1-4",pinesapling:"0-1"},tool:4,back:'304D07'},
  pineleaves:{grainy:"leaves",mineTime:0.5,drops:{pineneedle:"2-5",stick:"1-4",pinesapling:"0-1"},trnsp:1,tool:4,back:'406609'},
  auttrunk:{grainy:1,mineTime:1,drops:{wood:"1-4"},tool:3,back:'9E715C'},
  aut1treaves:{grainy:"treaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",autumnsapling:"0-1"},tool:4,back:'C0412A'},
  aut1leaves:{grainy:"leaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",autumnsapling:"0-1"},trnsp:1,tool:4,back:'D84830'},
  aut2treaves:{grainy:"treaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",autumnsapling:"0-1"},tool:4,back:'D78241'},
  aut2leaves:{grainy:"leaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",autumnsapling:"0-1"},trnsp:1,tool:4,back:'F09048'},
  aut3treaves:{grainy:"treaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",autumnsapling:"0-1"},tool:4,back:'D7AC56'},
  aut3leaves:{grainy:"leaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",autumnsapling:"0-1"},trnsp:1,tool:4,back:'F0C060'},
  sand:{mineTime:0.5,grainy:1,drops:{sand:1},tool:2,back:'EED38B',fireproof:1},
  water:{mineTime:5,liquid:1,drops:{water:1},tool:2,back:'A7DBD8',evaporatesto:'vapour',fireproof:1},
  basaltgravel:{mineTime:0.5,grainy:1,drops:{basalt:1},tool:5,back:'A48F80',fireproof:1},
  granitegravel:{mineTime:0.5,grainy:1,drops:{granite:1},tool:5,back:'DFD291',fireproof:1},
  limestonegravel:{mineTime:0.5,grainy:1,drops:{limestone:1},tool:5,back:'D0DABF',fireproof:1},
  rose:{trnsp:1,mineTime:0.1,groundCover:1,drops:{rose:1},tool:4,back:'D03434'},
  goldenrod:{trnsp:1,mineTime:0.1,groundCover:1,drops:{goldenrod:1},tool:4,back:'D0AE34'},
  myosotis:{trnsp:1,mineTime:0.1,groundCover:1,drops:{myosotis:1},tool:4,back:'0077FF'},
  feore:{mineTime:3,drops:{basalt:4,iron:"1-3"},tool:1,back:'BA603B',fireproof:1},
  auore:{mineTime:3,drops:{granite:4,gold:"1-3"},tool:1,back:'D2A70B',fireproof:1},
  cuore:{mineTime:3,drops:{limestone:4,copper:"1-3"},tool:1,back:'558674',fireproof:1},
  poore:{mineTime:3,drops:{basalt:4,powerpowder:"1-3"},tool:1,back:'AC584B',fireproof:1},
  coal:{mineTime:3,drops:{granite:4,coal:"1-3"},tool:1,back:'222222'},
  sulfur:{mineTime:3,drops:{granite:4,sulfur:"1-3"},tool:1,back:'EEE692'},
  assembler:{mineTime:1,drops:{assembler:1},trnsp:1,furn:1,tool:3,back:'CE9E6B',invmode:'assemble'},
  melter:{mineTime:1,drops:{melter:1},trnsp:1,furn:1,tool:1,back:'919596',fireproof:1,invmode:'melt'},
  grasspile:{mineTime:0.5,grainy:1,drops:{grasspile:1},tool:4,back:'1B8505'},
  grassblock:{mineTime:1,drops:{grassblock:1},tool:5,back:'166C04'},
  toughgrass:{mineTime:3,drops:{toughergrassblock:1},tool:1,back:'105203',fireproof:1},
  lava:{mineTime:5,liquid:1,drops:{lava:1},tool:2,back:'FF6015',evaporatesto:'basalt',fireproof:1},
  acid:{mineTime:8,liquid:1,drops:{},acidproof:1,tool:2,back:'00FF00',fireproof:1},
  heal:{mineTime:5,liquid:1,drops:{healingliquid:1},tool:2,back:'F06292',fireproof:1},
  oaksapling:{trnsp:1,mineTime:0.1,groundCover:1,drops:{oaksapling:1},tool:4,back:'82B53C'},
  pinesapling:{trnsp:1,mineTime:0.1,groundCover:1,drops:{pinesapling:1},tool:4,back:'406609'},
  autumnsapling:{trnsp:1,mineTime:0.1,groundCover:1,drops:{autumnsapling:1},tool:4,back:'D84830'},
  vapour:{mineTime:5,drops:{},trnsp:1,back:'ffffff',vapour:1,vapourcondensesto:'water',fireproof:1},
  acidproof:{mineTime:5,drops:{},tool:1,acidproof:1,back:'799779',fireproof:1},
  acidvapour:{mineTime:5,drops:{contaminant:1},acidproof:1,trnsp:1,back:'CDFFCD',vapour:1/*,vapourcondensesto:'smoke'*/},
  contaminatedwater:{mineTime:5,liquid:1,drops:{contaminatedwater:1},acidproof:1,tool:2,back:'5FBFF3',evaporatesto:'acidvapour',fireproof:1},
  seawater:{mineTime:5,liquid:1,drops:{seawater:1},tool:2,back:'69D2E7',evaporatesto:'vapour',fireproof:1},
  smoke:{mineTime:5,drops:{},trnsp:1,back:'D7DACF',vapour:1,explosionproof:1,fireproof:1},
  flare:{mineTime:-1,drops:{},trnsp:1,back:'FFF700',fireproof:1},
  explosive:{mineTime:0.5,drops:{explosive:1},back:'92002C',fireproof:1},
  explosive2:{mineTime:-1,drops:{},trnsp:1,back:'FF0451'},
  fire:{mineTime:0.2,drops:{},back:'FF6540',trnsp:1,fireproof:1,grainy:1},
  palmtrunk:{grainy:1,mineTime:1,drops:{wood:"1-4"},tool:3,back:'D1BE94'},
  palmtreaves:{grainy:"treaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",palmsapling:"0-1"},tool:4,back:'87BB25'},
  palmleaves:{grainy:"leaves",mineTime:0.5,drops:{leaf:"2-5",stick:"1-4",palmsapling:"0-1"},trnsp:1,tool:4,back:'99D42A'},
  palmsapling:{trnsp:1,mineTime:0.1,groundCover:1,drops:{palmsapling:1},tool:4,back:'99D42A'},
  seaweed:{mineTime:0.3,liquid:1,liquidtrnsp:1,drops:{},tool:2,back:'1B4201'},
  charcoal:{mineTime:1,drops:{charcoal:"2-5"},tool:1,back:'444444',fireproof:1,grainy:1},
  urine:{mineTime:5,liquid:1,drops:{urine:1},tool:2,back:'fbce26',evaporatesto:'vapour',fireproof:1},
  feces:{mineTime:0.5,grainy:1,trnsp:1,drops:{feces:1},tool:5,back:'593318',fireproof:1},
  compost:{mineTime:0.5,grainy:1,drops:{compost:1},tool:5,back:'38312F',fireproof:1},
},itemData={ /* texture=url of svg texture, ingrid=assembling recipe, desc=description in inventory, place=name of block to place, metals=melting recipe,
  tool:1-drill 2-bucket 3-saw 4-scissors 5-shovel, toolspeed:coefficient enhancing minespeed of correct block */
  dirt:{texture:"items/dirt.svg",desc:"Useless inflammable brown stuff.",place:"dirt"},
  grass:{texture:"items/grass.svg",desc:"Icky green stuff.",place:"tallgrass"},
  basalt:{texture:"items/rock.svg",desc:"A rock.",place:"basaltgravel"},
  granite:{texture:"items/granite.svg",desc:"Hard stuff.",place:"granitegravel"},
  limestone:{texture:"items/limestone.svg",desc:"Rocks are cool.",place:"limestonegravel"},
  wood:{texture:"items/wood.svg",desc:"Tree bones."},
  stick:{texture:"items/stick.svg",desc:"Thinner tree bones."},
  leaf:{texture:"items/leaf.svg",desc:"Tree hair."},
  pineneedle:{texture:"items/needle.svg",desc:"Thinner tree hair."},
  oaksapling:{texture:"items/oaksap.svg",desc:"Makes 1 oak tree.",place:"oaksapling"},
  pinesapling:{texture:"items/pinesap.svg",desc:"Makes 1 pine tree. Perfect for snowy places.",place:"pinesapling"},
  autumnsapling:{texture:"items/autsap.svg",desc:"Makes 1 autumn tree. Perfect for fall-themed places.",place:"autumnsapling"},
  iron:{texture:"items/feore.svg",desc:"A boring but useful metal that rusts."},
  gold:{texture:"items/auore.svg",desc:"A reddish-yellow soft metal that only looks pretty."},
  copper:{texture:"items/cuore.svg",desc:"A reddish-orange metal that patinates."},
  powerpowder:{texture:"items/poore.svg",desc:"A special material containing unused power."},
  coal:{texture:"items/coal.svg",desc:"Nonrenewable fossil fuel made of carbon."},
  sand:{texture:"items/sand.svg",desc:"Not ideal for making castles.",place:"sand"},
  rose:{texture:"rose.svg",desc:"Red semicircles.",place:"rose"},
  goldenrod:{texture:"goldenrod.svg",desc:"Yellow isosceles triangles.",place:"goldenrod"},
  myosotis:{texture:"myosotis.svg",desc:"Blue pentagons. Also known as a forget-me-not.",place:"myosotis"},
  assembler:{texture:"items/assembler.svg",ingrid:{wood:3},desc:"Making things on a table like a civilized person should do.",place:"assembler"},
  melter:{texture:"items/melter.svg",ingrid:{limestone:3},desc:"Burn things in a box like a civilized person should do.",place:"melter"},
  grasspile:{texture:"items/grasspile.svg",ingrid:{grass:50},desc:"Grass smushed together.",place:"grasspile"},
  grassblock:{texture:"items/grassblock.svg",ingrid:{grasspile:50},desc:"Lots of grass smushed together.",place:"grassblock"},
  toughergrassblock:{texture:"items/toughgrass.svg",ingrid:{grassblock:50},desc:"Tons of grass smushed together.",place:"toughgrass"},
  shovel:{texture:"items/shovel.svg",ingrid:{wood:1,stick:2},desc:"A badly made wood slapper.",tool:5,toolspeed:3},
  bucket:{texture:"items/bucket.svg",metals:{iron:3},desc:"A cup made for carrying things.",tool:2,toolspeed:50},
  blade:{texture:"items/blade.svg",metals:{iron:1},desc:"A sharp flat metal stick that hurts when you eat it."},
  scissors:{texture:"items/scissors.svg",ingrid:{blade:2},desc:"Two blades put together to chop things.",tool:4,toolspeed:3},
  saw:{texture:"items/saw.svg",ingrid:{blade:1,stick:2},desc:"A stick made for destroying tree bones.",tool:3,toolspeed:15},
  water:{texture:"items/water.svg",desc:"A very delicous liquid.",place:"water",drink:3600},
  lava:{texture:"items/lava.svg",desc:"A very hot liquid.",place:"lava"},
  acid:{texture:"items/acid.svg",desc:"A very dangeorous liquid.",place:"acid"},
  healingliquid:{texture:"items/heal.svg",desc:"A first aid kit in a bucket.",place:"heal"},
  drill:{texture:"items/drill.svg",metals:{blade:3,powerpowder:2,iron:1},desc:"A pointy object that destroys hard stuff for you.",tool:1,toolspeed:30},
  seawater:{texture:"items/seawater.svg",ingrid:{water:1,salt:1},desc:"H20 and NaCl.",place:"seawater"},
  palmsapling:{texture:"items/palmsap.svg",desc:"Makes 1 palm tree. Perfect for beaches.",place:"palmsapling"},
  basaltblock:{texture:"items2/basaltblock.svg",metals:{basalt:4},desc:"A firmer form of a rock.",place:"basalt"},
  graniteblock:{texture:"items2/graniteblock.svg",metals:{granite:4},desc:"Unaffected by gravity.",place:"granite"},
  limestoneblock:{texture:"items2/limestoneblock.svg",metals:{limestone:4},desc:"Not as fragile.",place:"limestone"},
  salt:{texture:"items2/salt.svg",metals:{seawater:1},desc:"Delicous NaCl."},
  contaminant:{texture:"items2/contaminate.svg",metals:{contaminatedwater:1},desc:"Bad stuff."},
  contaminatedwater:{texture:"items2/contaminated.svg",ingrid:{water:1,contaminant:1},desc:"Bad water."},
  charcoal:{texture:"items2/charcoal.svg",desc:"Burnt stuff."},
  gunpowder:{texture:"items2/charcoalp.svg",ingrid:{charcoal:1,sulfur:1},desc:"Explosive stuff."},
  plantfibre:{texture:"items2/fibre.svg",ingrid:{grass:1},desc:"Destroyed grass bits."},
  paper:{texture:"items2/paper.svg",ingrid:{plantfibre:4},desc:"Flat white rectangles."},
  explosive:{texture:"items2/explosive.svg",ingrid:{paper:3,gunpowder:3},desc:"Dangerous stuff, requires fire to explode.",place:'explosive'},
  sulfur:{texture:"items2/sulfur.svg",desc:"Smelly stuff."},
  match:{texture:"items2/match.svg",ingrid:{stick:1,sulfur:1},desc:"Easily create dangerous hot stuff!",place:'fire'},
  acidproofblock:{texture:"items2/acidproof.svg",desc:"A rock that can't be destroyed by the very scary acid.",place:"acidproof"},
  acidproofbucket:{texture:"items2/acidproofbucket.svg",metals:{acidproofblock:3},desc:"A cup made for carrying the very scary acid.",tool:2,toolspeed:80},
  bucketofacid:{texture:"items2/acidbucket.svg",desc:"A cup holding the very scary acid.",place:'acid'},
  urine:{texture:"items2/urine.svg",desc:"WHY ARE YOU EVEN KEEPING THIS?!",place:"urine"},
  feces:{texture:"items2/feces.svg",desc:"Leave on dirt for a little while and you'll get compost.",place:"feces"},
  compost:{texture:"items2/compost.svg",desc:"Good for plants, smells bad.",place:"compost"},
},
inv={},invMode=false,invPage="inf",
hand1="",hand2="",lel,playerData={health:100,fallDistance:-1,oxygen:300,thirst:3600,bladder:0,hunger:3600,rectum:0},timeoutId=0;
document.body.onkeydown=function(e){
  switch (e.keyCode) {
    case 87:wD=true;break;
    case 65:aD=true;break;
    case 83:sD=true;break;
    case 68:dD=true;break;
    case 32:spD=true;break;
    case 81:qD=true;if(!invMode)document.querySelector("#uno").style.transform="scale(1.1)";break; // perspective(100px) rotateX(10deg)
    case 69:eD=true;if(!invMode)document.querySelector("#two").style.transform="scale(1.1)";break;
    case 80:
      if (pausd) loop=setInterval(mainloop,33);
      else clearInterval(loop);
      document.querySelector("#cover").style.cursor=pausd&&!invMode?"none":"auto";
      pausd=!pausd;
      if (!pausd) document.querySelector('#preview').style.display='none';
      break;
    case 51:
      document.querySelector("#cover").style.cursor=invMode?"none":"auto";
      if (invMode) {
        document.querySelector("#inv").removeChild(document.querySelector("#slotes"));
        if (invMode=='inv') document.querySelector("#inv").removeChild(document.querySelector("#info"));
        else if (invMode=='assemble') document.querySelector("#inv").removeChild(document.querySelector("#availables"));
        else if (invMode=='melt') document.querySelector("#inv").removeChild(document.querySelector("#availables"));
        document.querySelector("#inv").innerHTML=document.querySelector("#inv").innerHTML.replace(/class="hand"/g,"class='handd'").replace("one","uno");
        invMode=false;
      } else {
        heyCodeCanYouMakeTheInventoryAppearOnTheScreenForMe();
        invMode="inv";
      }
      document.querySelector("#cursor").style.display=invMode?"none":"block";
      break;
    case 50:twoD=true;break;
  }
};
document.body.onkeyup=function(e){
  switch (e.keyCode) {
    case 87:wD=false;break;
    case 65:aD=false;break;
    case 83:sD=false;break;
    case 68:dD=false;break;
    case 32:spD=false;break;
    case 81:qD=false;if(!invMode)document.querySelector("#uno").style.transform="none";break;
    case 69:eD=false;if(!invMode)document.querySelector("#two").style.transform="none";break;
    case 50:twoD=false;break;
  }
};
function init() {
  level=[];
  var heights=[Math.floor(Math.random()*30)+40];
  for (var i=0;i<lH;i++) {
    level.push([]);
    for (var j=0;j<lW;j++) {
      level[i].push("air");
      if (i==0&&j>0) heights.push(heights[heights.length-1]+Math.floor(Math.random()*5)-2);
    }
  }
  for (var i=0;i<lH;i++) {
    for (var j=0;j<lW;j++) {
      if (i==0) level[i][j]="reinforceddiamond";
      else if (i<=heights[j]-Math.floor(Math.random()*7)-2) {
        if (i<=heights[j]-20&&!Math.floor(Math.random()*400)) level[i][j]="makelava";
        if (i<=heights[j]-40&&!Math.floor(Math.random()*400)) level[i][j]="makeacid";
        else if (!Math.floor(Math.random()*100)) level[i][j]="make"+["fe","au","cu","po"][Math.floor(Math.random()*4)]+"ore";
        else if (!Math.floor(Math.random()*200)) level[i][j]="make"+['coal','sulfur'][Math.floor(Math.random()*2)];
        else {
          if (j===0) {
            if (Math.floor(Math.random()*3)&&["basalt",'granite','limestone'].includes(level[i-1][j])) level[i][j]=level[i-1][j];
            else level[i][j]=["basalt",'granite','limestone'][Math.floor(Math.random()*3)];
          } else {
            var k=Math.floor(Math.random()*3)-1;
            if (!["basalt",'granite','limestone'].includes(level[i+k][j-1])||!Math.floor(Math.random()*200)) level[i][j]=["basalt",'granite','limestone'][Math.floor(Math.random()*3)];
            else level[i][j]=level[i+k][j-1];
          }
        }
      }
      else if (i<=heights[j]) {
        if (42>heights[j]) level[i][j]=["dirt","sand","basaltgravel","granitegravel","limestonegravel"][Math.floor(Math.random()*5)];
        else if (70>heights[j]) level[i][j]="dirt";
        else level[i][j]=Math.floor(Math.random()*4)?'limestone':'dirt';
      }
      else if (i==heights[j]+1&&45>heights[j]&&i>40) {
        if (Math.floor(Math.random()*2)) level[i][j]="tallgrass";
        else if (Math.floor(Math.random()*5)==0) level[i][j]='palmsapling';
      }
      else if (i==heights[j]+1&&45>heights[j]&&i<=40) {
        if (!Math.floor(Math.random()*8)) level[i][j]="makeseaweed";
        else level[i][j]="seawater";
      }
      else if (i==heights[j]+1&&45<=heights[j]&&70>heights[j]) {
        if (Math.floor(Math.random()*2)) level[i][j]="tallgrass";
        else if (Math.floor(Math.random()*5)==0) level[i][j]=["oak","autumn"][Math.floor(Math.random()*2)]+"sapling";
        else if (Math.floor(Math.random()*9)<8) level[i][j]=["rose","goldenrod","myosotis"][Math.floor(Math.random()*3)];
      }
      else if (i==heights[j]+1&&70<=heights[j]) {
        if (!Math.floor(Math.random()*5)&&level[i-1][j]=='dirt') level[i][j]="pinesapling";
        else if (!Math.floor(Math.random()*30)) level[i][j]='makeheallake';
      }
      else if (40>=heights[j]&&i<=40) level[i][j]="seawater";
      else if (149-Math.floor(Math.random()*2)<i&&i>50&&heights[j]+10<i&&i<150) level[i][j]="vapour";
    }
  }
  function ore(size,whereX,whereY,wat) {
    level[whereY][whereX]=wat;
    for (var k=0;k<size;k++) {
      if (["basalt",'granite','limestone'].includes(level[whereY+k][whereX])) level[whereY+k][whereX]=wat;
      for (var l=-Math.floor(Math.random()*size);l<Math.floor(Math.random()*size);l++) {if (["basalt",'granite','limestone'].includes(level[whereY+k][whereX+l])) level[whereY+k][whereX+l]=wat;}
    }
  }
  for (var i=0;i<lH;i++) {
    for (var j=0;j<lW;j++) {
      switch (level[i][j]) {
        case "makefeore":
          ore(6,j,i,level[i][j].slice(4));
          break;
        case "makeauore":
          ore(3,j,i,level[i][j].slice(4));
          break;
        case "makecuore":
          ore(5,j,i,level[i][j].slice(4));
          break;
        case "makepoore":
          ore(4,j,i,level[i][j].slice(4));
          break;
        case "makecoal":
          ore(5,j,i,"coal");
          break;
        case "makesulfur":
          ore(5,j,i,"sulfur");
          break;
        case "makelava":
          level[i][j]="lava";
          for (var k=0;k<4;k++) {
            if (["basalt",'granite','limestone'].includes(level[i+k][j])) level[i+k][j]="lava";
            for (var l=-Math.floor(Math.random()*7);l<Math.floor(Math.random()*7);l++) {if (["basalt",'granite','limestone'].includes(level[i+k][j+l])) level[i+k][j+l]="lava";}
          }
          break;
        case "makeseaweed":
          level[i][j]="seaweed";
          var size=Math.floor(Math.random()*8)+2;
          for (var k=1;k<size;k++) {
            if (level[i+k][j]=="water"||level[i+k][j]=="seawater") level[i+k][j]="seaweed";
            else break;
          }
          break;
        case "makeheallake":
          var size=Math.floor(Math.random()*3)+2;
          for (var k=0;k<size;k++) {
            level[i-k][j]="heal";
            for (var l=0;l<size-k+Math.floor(Math.random()*3)-1;l++) level[i-k][j+l]="heal";
            for (var l=0;l<size-k+Math.floor(Math.random()*3)-1;l++) level[i-k][j-l]="heal";
          }
          break;
        case "makeacid":
          level[i][j]="acid";
          level[i+1][j]="acidproof";
          if (level[i-1][j]!="reinforceddiamond") level[i-1][j]="acidproof";
          level[i][j+1]="acidproof";
          level[i][j-1]="acidproof";
          break;
      }
    }
  }
  for (var i=1;i<lH;i++) {
    if (blockData[level[i][Math.floor(lW/2)]].groundCover) {
      level[i][Math.floor(lW/2)]='air';
      level[i+1][Math.floor(lW/2)]='air';
      cX=lW*8-232;
      cY=i*16-164;
      break;
    } else level[i][Math.floor(lW/2)]='basalt';
  }
  sX=x=cX;sY=y=cY;
}
init();
loop=setInterval(mainloop,33);pausd=false;
function load(page) {
  var xhttp=new XMLHttpRequest();
  xhttp.onreadystatechange=function() {
    if (this.readyState==4&&this.status==200) {
      if (page=="blockData.json") blockData=JSON.parse(this.responseText);
      else if (page=="itemData.json") itemData=JSON.parse(this.responseText);
      else console.log('So someone loaded a page but we don\' know what to do with it, so...\n'+this.responseText);
    }
  };
  xhttp.open("GET",page,true);
  xhttp.send();
}
function mainloop() {
  if (invMode) inventory();
  else {
    draw();
    interact();
    play();
    updateEntireWorld();
  }
}
function draw() {
  sX+=Math.round((x-sX)*20)/100;
  sY+=Math.round((y-sY)*20)/100;
  if (sX<0) sX=0;
  if (sX>lW*16-480) sX=lW*16-480;
  if (sY<0) sY=0;
  if (sY>lH*16-360) sY=lH*16-360;
  function renderBlock(col,xpos,ypos,width) {
    if (ypos>360) return "";
    if (xpos>480) return "";
    return "<div class='block "+col+"' style='bottom:"+ypos+"px;left:"+xpos+"px;width:"+width+"px;'></div>";
  }
  var tempX=-sX%16,tempY=-sY%16,destX=Math.floor(sX/16)+480/16+1,destY=Math.floor(sY/16)+360/16+1,stuff="";
  for (var i=Math.floor(sY/16);i<destY;i++) {
    if (i>level.length-1) {break;}
    var t=level[i][0],c=Math.floor(sX/16);
    for (var j=c;j<destX;j++) {
      if (t!=level[i][j]) {
        if (t!="air") {
          stuff+=renderBlock(t,tempX,tempY,(j-c)*16);
        }
        tempX+=(j-c)*16;
        c=j;
        t=level[i][j];
      }
    }
    if (t!="air") {
      stuff+=renderBlock(t,tempX,tempY,(j-c)*16);
    }
    tempX+=(j-c)*16-496;
    tempY+=16;
  }
  document.querySelector("#stage").innerHTML=stuff;
  tempX=0;tempY=0;
  if (x>lW*16-480) tempX=x-(lW*16-480);
  else if (x<0) tempX=x;
  else tempX=x-sX;
  if (y>lH*16-360) tempY=y-(lH*16-360);
  else if (y<0) tempY=y;
  else tempY=y-sY;
  document.querySelector("#player").style.left=tempX+"px";
  document.querySelector("#player").style.right=-tempX+"px";
  document.querySelector("#player").style.bottom=tempY+"px";
  document.querySelector("#player").style.top=-tempY+"px";
  if (playerData.health>100) playerData.health=100;
  document.querySelector("#health").style.borderLeftWidth=(playerData.health/2)+'px'
  document.querySelector("#health").style.borderRightWidth=(50-playerData.health/2)+'px'
  if (playerData.oxygen>300) playerData.oxygen=300;
  document.querySelector("#oxygen").style.borderLeftWidth=(playerData.oxygen/6)+'px'
  document.querySelector("#oxygen").style.borderRightWidth=(50-playerData.oxygen/6)+'px'
  if (playerData.thirst>3600) playerData.thirst=3600;
  document.querySelector("#thirst").style.borderLeftWidth=(playerData.thirst/72)+'px'
  document.querySelector("#thirst").style.borderRightWidth=(50-playerData.thirst/72)+'px'
  if (playerData.hunger>3600) playerData.hunger=3600;
  document.querySelector("#hunger").style.borderLeftWidth=(playerData.hunger/72)+'px'
  document.querySelector("#hunger").style.borderRightWidth=(50-playerData.hunger/72)+'px'
}
function updateBlock(i,j) {
  function getBlock(xx,yy) {
    var block;
    block=level[yy];
    if (block===undefined) return blockData["reinforceddiamond"];
    block=block[xx];
    if (block===undefined) return blockData["reinforceddiamond"];
    block=blockData[block];
    if (block===undefined) return blockData["reinforceddiamond"];
    else return block;
  }
  function nearTreaf(xx,yy) {
    for (var i=-5;i<=5;i++) {
      if (getBlock(xx+i,yy).grainy=="treaves") return true;
    }
    return false;
  }
  if (getBlock(j,i).grainy&&!(getBlock(j,i).grainy=="leaves"&&nearTreaf(j,i))) {
    if (level[i][j]=="grass") level[i][j]="dirt";
    if (getBlock(j,i-1).groundCover) {
      level[i-1][j]=level[i][j];
      level[i][j]="air";
    } else if (getBlock(j,i-1).liquid) {
      var tempp=level[i-1][j]
      level[i-1][j]=level[i][j];
      level[i][j]=tempp;
    }
  }
  if (getBlock(j,i).liquid&&!getBlock(j,i).liquidtrnsp) {
    var k=(Math.floor(Math.random()*2)-0.5)*2,tempp=level[i][j];
    level[i][j]="air";
    if (getBlock(j,i-1).groundCover) level[i-1][j]=tempp;
    else if (getBlock(j+1,i-1).groundCover&&getBlock(j+1,i).groundCover) level[i-1][j+1]=tempp;
    else if (getBlock(j-1,i-1).groundCover&&getBlock(j-1,i).groundCover) level[i-1][j-1]=tempp;
    else if (getBlock(j+k,i).groundCover) level[i][j+k]=tempp;
    else level[i][j]=tempp;
    if (getBlock(j,i).evaporatesto) {
      for (var k=1;k<9;k+=2) {
        if (getBlock(Math.floor(k/3)-1+j,k%3-1+i).trnsp&&!Math.floor(Math.random()*200)) {
          level[i][j]=getBlock(j,i).evaporatesto;
          break;
        } else {
          var original=level[i][j];
          switch (level[i][j]) {
            case 'water':
              if (level[k%3-1+i][Math.floor(k/3)-1+j]=="contaminatedwater"&&!Math.floor(Math.random()*20)) level[i][j]="contaminatedwater";
              else if (level[k%3-1+i][Math.floor(k/3)-1+j]=="seawater"&&!Math.floor(Math.random()*20)) level[i][j]="seawater";
              else if (level[k%3-1+i][Math.floor(k/3)-1+j]=="heal"&&!Math.floor(Math.random()*20)) level[i][j]="heal";
              else if (level[k%3-1+i][Math.floor(k/3)-1+j]=="urine"&&!Math.floor(Math.random()*50)) level[k%3-1+i][Math.floor(k/3)-1+j]="water";
              break;
            case 'contaminatedwater':
              if (level[k%3-1+i][Math.floor(k/3)-1+j]=="acid"&&!Math.floor(Math.random()*100)) level[i][j]="acid";
              else if (level[k%3-1+i][Math.floor(k/3)-1+j]=="urine"&&!Math.floor(Math.random()*50)) level[k%3-1+i][Math.floor(k/3)-1+j]="contaminatedwater";
              break;
            case 'seawater':
              if (level[k%3-1+i][Math.floor(k/3)-1+j]=="contaminatedwater"&&!Math.floor(Math.random()*20)) level[i][j]="contaminatedwater";
              else if (level[k%3-1+i][Math.floor(k/3)-1+j]=="urine"&&!Math.floor(Math.random()*50)) level[k%3-1+i][Math.floor(k/3)-1+j]="seawater";
              break;
            case 'lava':
              if (level[k%3-1+i][Math.floor(k/3)-1+j]=="water") {
                level[k%3-1+i][Math.floor(k/3)-1+j]="vapour";
                level[i][j]="basalt";
              }
              if (level[k%3-1+i][Math.floor(k/3)-1+j]=="seawater") {
                level[k%3-1+i][Math.floor(k/3)-1+j]="vapour";
                level[i][j]="basalt";
              }
              if (level[k%3-1+i][Math.floor(k/3)-1+j]=="contaminatedwater") {
                level[k%3-1+i][Math.floor(k/3)-1+j]="vapour";
                level[i][j]="explosive2";
              }
              if (level[k%3-1+i][Math.floor(k/3)-1+j]=="urine") {
                level[k%3-1+i][Math.floor(k/3)-1+j]="vapour";
                level[i][j]="basalt";
              }
              if (!blockData[level[k%3-1+i][Math.floor(k/3)-1+j]].fireproof&&!Math.floor(Math.random()*100)) level[k%3-1+i][Math.floor(k/3)-1+j]="fire";
              break;
          }
          if (level[i][j]!=original) break;
        }
      }
    }
  }
  if (getBlock(j,i).furn||getBlock(j,i).groundCover&&level[i][j]!="air") {
    if (getBlock(j,i-1).trnsp) {
      addToInv(level[i][j]);
      level[i][j]="air";
    }
  }
  if (getBlock(j,i).vapour) {
    if (/*!Math.floor(Math.random()*200)&&getBlock(j,i).vapourcondensesto||*/i>150&&getBlock(j,i).vapourcondensesto) level[i][j]=getBlock(j,i).vapourcondensesto;
    else if (!Math.floor(Math.random()*3)) {
      var k=Math.floor(Math.random()*3)-1,tempp=level[i][j];
      level[i][j]="air";
      if (getBlock(j+k,i+1).groundCover) level[i+1][j+k]=tempp;
      else if (getBlock(j+k,i+1).liquid) {level[i][j]=level[i+1][j+k];level[i+1][j+k]=tempp;}
      else if (getBlock(j,i+1).grainy===1&&!k) {level[i][j]=level[i+1][j+k];level[i+1][j+k]=tempp;}
      else if (getBlock(j+k,i).groundCover) level[i][j+k]=tempp;
      else if (getBlock(j+k,i).liquid) {level[i][j]=level[i][j+k];level[i][j+k]=tempp;}
      else level[i][j]=tempp;
    }
  }
  switch (level[i][j]) {
    case "dirt":
      if (getBlock(j,i+1).trnsp) level[i][j]="grass";
      break;
    case "grass":
      if (!getBlock(j,i+1).trnsp) level[i][j]="dirt";
      break;
    case "oaksapling":
      var hite=Math.floor(Math.random()*5)+5;
      for (var k=0;k<hite;k++) {
        if (k<hite/3) level[i+k][j]="oaktrunk";
        else {
          level[i+k][j]="oaktreaves";
          for (var l=1;l<Math.floor(Math.random()*2)+(hite/2-Math.abs(k-(hite/2+1)));l++) level[i+k][j+l]="oakleaves";
          for (var l=1;l<Math.floor(Math.random()*2)+(hite/2-Math.abs(k-(hite/2+1)));l++) level[i+k][j-l]="oakleaves";
        }
      }
      level[i+hite][j]="oakleaves";
      break;
    case "pinesapling":
      var hite=Math.floor(Math.random()*5)+7;
      for (var k=0;k<hite;k++) {
        if (k<hite/3) level[i+k][j]="pinetrunk";
        else {
          level[i+k][j]="pinetreaves";
          for (var l=1;l<(hite-k)/(Math.random()*2+1.5);l++) level[i+k][j+l]="pineleaves";
          for (var l=1;l<(hite-k)/(Math.random()*2+1.5);l++) level[i+k][j-l]="pineleaves";
        }
      }
      level[i+hite][j]="pineleaves";
      break;
    case "autumnsapling":
      var hite=Math.floor(Math.random()*5)+5;
      for (var k=0;k<hite;k++) {
        if (k<hite/3) level[i+k][j]="auttrunk";
        else {
          level[i+k][j]="aut"+Math.floor(Math.random()*3+1)+"treaves";
          for (var l=1;l<Math.floor(Math.random()*2)+(hite/2-Math.abs(k-(hite/2+1)));l++) level[i+k][j+l]="aut"+Math.floor(Math.random()*3+1)+"leaves";
          for (var l=1;l<Math.floor(Math.random()*2)+(hite/2-Math.abs(k-(hite/2+1)));l++) level[i+k][j-l]="aut"+Math.floor(Math.random()*3+1)+"leaves";
        }
      }
      level[i+hite][j]="aut"+Math.floor(Math.random()*3+1)+"leaves";
      break;
    case "acid":
      function acidTransform(block) {
        return ["basalt",'granite','limestone'].includes(block)&&!Math.floor(Math.random()*10)?"acidproof":(block=="water"?"contaminatedwater":"acidvapour");
      }
      if (["basalt",'granite','limestone'].includes(level[i+1][j])&&!Math.floor(Math.random()*10)) level[i+1][j]="acidproof";
      else if (level[i+1][j]=="water") level[i+1][j]="contaminatedwater";
      else if (level[i+1][j]=="seawater") level[i+1][j]="contaminatedwater";
      else if (level[i+1][j]=="urine") level[i+1][j]="contaminatedwater";
      if (!getBlock(j,i-1).acidproof&&!Math.floor(Math.random()*10)) level[i-1][j]=acidTransform(level[i-1][j]);
      if (!getBlock(j-1,i).acidproof&&!Math.floor(Math.random()*3)) level[i][j-1]=acidTransform(level[i][j-1]);
      if (!getBlock(j+1,i).acidproof&&!Math.floor(Math.random()*3)) level[i][j+1]=acidTransform(level[i][j+1]);
      break;
    case "flare":
      if (Math.floor(Math.random()*2)) level[i][j]=Math.floor(Math.random()*20)?"smoke":"acidvapour";
      break;
    case "explosive2":
      var size=Math.floor(Math.random()*2)+3;
      for (var k=-size;k<size;k++) {
        for (var l=-size;l<size;l++) {
          if (!getBlock(j+l,i+k).explosionproof&&Math.sqrt(k*k+l*l)<=size) {
            addToInv(level[i+k][j+l]);
            if (getBlock(j+l,i+k).groundCover) level[i+k][j+l]='flare';
            else if (level[i+k][j+l]=='explosive') level[i+k][j+l]='explosive2';
            else level[i+k][j+l]=Math.floor(Math.random()*3)?'flare':'fire';
          }
        }
      }
      level[i][j]="air";
      break;
    case 'fire':
      for (var k=1;k<9;k+=2) {
        if (level[k%3-1+i][Math.floor(k/3)-1+j]=='acidvapour') level[k%3-1+i][Math.floor(k/3)-1+j]='explosive2';
        else if (level[k%3-1+i][Math.floor(k/3)-1+j]=='water'&&!Math.floor(Math.random()*20)) {
          level[k%3-1+i][Math.floor(k/3)-1+j]='vapour';
          if (!Math.floor(Math.random()*2)) level[i][j]='charcoal';
        }
        else if (level[k%3-1+i][Math.floor(k/3)-1+j]=='seawater'&&!Math.floor(Math.random()*20)) {
          level[k%3-1+i][Math.floor(k/3)-1+j]='vapour';
          if (!Math.floor(Math.random()*2)) level[i][j]='charcoal';
        }
        else if (level[k%3-1+i][Math.floor(k/3)-1+j]=='contaminatedwater'&&!Math.floor(Math.random()*20)) {
          level[k%3-1+i][Math.floor(k/3)-1+j]='explosive2';
          if (!Math.floor(Math.random()*2)) level[i][j]='charcoal';
        }
        else if (level[k%3-1+i][Math.floor(k/3)-1+j]=='urine'&&!Math.floor(Math.random()*20)) {
          level[k%3-1+i][Math.floor(k/3)-1+j]='vapour';
          if (!Math.floor(Math.random()*2)) level[i][j]='charcoal';
        }
        else if (level[k%3-1+i][Math.floor(k/3)-1+j]=='explosive') level[k%3-1+i][Math.floor(k/3)-1+j]='explosive2';
        else if (!getBlock(Math.floor(k/3)-1+j,k%3-1+i).fireproof&&!Math.floor(Math.random()*20)) level[k%3-1+i][Math.floor(k/3)-1+j]='fire';
      }
      if (!Math.floor(Math.random()*100)) level[i][j]="charcoal";
      else if (level[i+1][j]=='air') level[i+1][j]="smoke";
      break;
    case "palmsapling":
      var hite=Math.floor(Math.random()*5)+7;
      for (var k=0;k<hite;k++) {
        if (k<hite-3) level[i+k][j]="palmtrunk";
        else {
          level[i+k][j]="palmtreaves";
          for (var l=1;l<3/(hite-k)+1;l++) {level[i+k][j+l]="palmleaves";level[i+k][j-l]="palmleaves";}
        }
      }
      level[i+hite][j]="palmleaves";
      for (var l=1;l<4;l++) {level[i+hite][j+l]="palmleaves";level[i+hite][j-l]="palmleaves";}
      break;
    case 'urine':
      level[i+1][j]="acidvapour";
      break;
    case 'feces':
      for (var k=1;k<9;k+=2) {
        if (['dirt','compost'].includes(level[k%3-1+i][Math.floor(k/3)-1+j])&&!Math.floor(Math.random()*100)) level[i][j]='compost';
      }
      if (getBlock(j,i+1).groundCover) level[i+1][j]="acidvapour";
      break;
  }
}
function update() {
  var destX=Math.floor(sX/16)+480/16+1,destY=Math.floor(sY/16)+360/16+1;
  for (var i=Math.floor(sY/16);i<destY;i++) {
    if (i>level.length-1) {break;}
    for (var j=Math.floor(sX/16);j<destX;j++) {
      updateBlock(i,j);
    }
  }
}
function updateEntireWorld() {
  for (var i=0;i<level.length;i++) {
    for (var j=0;j<level[0].length;j++) {
      updateBlock(i,j);
    }
  }
}
function foo(xo,yo,block) { // in px
  var block;
  if (block) level[Math.floor((y+180+yo)/16)][Math.floor((x+240+xo)/16)]=block;
  return level[Math.floor((y+180+yo)/16)][Math.floor((x+240+xo)/16)];
}
function play() {
  x+=xv;y+=yv;
  if (x>lW*16) x=lW*16;
  if (y>lH*16) y=lH*16;
  if (x<-232) x=-232;
  if (y<-172) y=-172;
  function collideable(xOff,yOff) { // in px
    var leX=Math.floor((x+240+xOff)/16),leY=Math.floor((y+180+yOff)/16),block=level[leY][leX];
    if (block===undefined)
      return true;
    else {
      if (blockData[block].liquid) return false;
      else return !(blockData[block].trnsp);
    }
  }
  function touchingA(blockOrProp,isItABlock) {
    var isItABlock,blocks=[
      level[Math.floor((y+172)/16)][Math.floor((x+232)/16)],
      level[Math.floor((y+172)/16)][Math.floor((x+247)/16)],
      level[Math.floor((y+188)/16)][Math.floor((x+232)/16)],
      level[Math.floor((y+188)/16)][Math.floor((x+247)/16)],
      level[Math.floor((y+204)/16)][Math.floor((x+232)/16)],
      level[Math.floor((y+204)/16)][Math.floor((x+247)/16)]
    ];
    if (isItABlock) return blocks.includes(blockOrProp);
    else {
      for (var i=0;i<6;i++) {
        if (blocks[i]) blocks[i]=blockData[blocks[i]][blockOrProp];
        else blockData.reinforceddiamond[blockOrProp];
      }
      return blocks.includes(1);
    }
  }
  var colLWall=collideable(-8,0)||collideable(-8,-15),
  colRWall=collideable(7,0)||collideable(7,-15),
  collidingWithWall=colLWall||colRWall;
  water=false,
  ceilingAbove=collideable(6,16)||collideable(-7,16);
  if (colLWall&&colRWall) collidingWithWall=false;
  if (collideable(6,-16)||collideable(-7,-16)) {
    yv=0;
    var backupY=y;
    y=Math.ceil((y-12)/16)*16+12;
    if (collidingWithWall) {
      colLWall=collideable(-8,0)||collideable(-8,-15);
      colRWall=collideable(7,0)||collideable(7,-15);
      collidingWithWall=colLWall||colRWall;
      if (collidingWithWall&&!collideable(0,-16)) y=backupY;
    }
  }
  if ((collideable(0,0)||blockData[level[Math.floor((y+180)/16)][Math.floor((x+240)/16)]].liquid)&&playerData.oxygen>0&&!touchingA('heal','block')) playerData.oxygen--;
  else if (playerData.oxygen<300) playerData.oxygen++;
  if (touchingA('liquid')) { /* swimming */
    water=true;
    if (spD) {
      xv=Math.round(xv*800)/1000;
      yv=Math.round(yv*800)/1000;
    } else {
      xv=Math.round(xv*950)/1000;
      yv=Math.round(yv*950)/1000;
      if(wD&&yv<7)yv+=1;
      if(aD&&xv>-7)xv-=1;
      if(sD&&yv>-7)yv-=1;
      if(dD&&xv<7)xv+=1;
    }
    if (playerData.fallDistance>-1) playerData.fallDistance=-1;
  } else if (!(collideable(-7,-17)||collideable(6,-17))) {
    if (yv>-20) yv--;
    var touchingLeftWall=collideable(-9,15)||collideable(-9,-16),touchingRightWall=collideable(8,15)||collideable(8,-16);
    if (aD&&!dD&&xv>-7&&!touchingLeftWall&&touchingRightWall) xv-=2;
    else if (dD&&!aD&&xv<7&&!touchingRightWall&&touchingLeftWall) xv+=2;
    if (playerData.fallDistance==-1) playerData.fallDistance=y;
  }
  else { /* MOVING */
    if (wD&&!ceilingAbove&&!collidingWithWall) yv=7;
    if (spD&&(collideable(-7,-17)||collideable(6,-17))) xv=Math.round(xv*300)/1000;
    else if (aD&&!dD&&xv>-7&&!(collideable(-9,15)||collideable(-9,-16))) xv-=1;
    else if (dD&&!aD&&xv<7&&!(collideable(8,15)||collideable(8,-16))) xv+=1;
    else if (!aD&&!dD) xv=Math.round(xv*700)/1000;
    if (Math.abs(xv)<0.01) {
      xv=0;
      x=Math.round(x*1000)/1000;
    }
    if (playerData.fallDistance>-1) {
      if (playerData.fallDistance-y>48) playerData.health-=Math.floor((playerData.fallDistance-y-48)/8);
      playerData.fallDistance=-1;
    }
  }
  if (collideable(6,16)||collideable(-7,16)) {
    if (!water&&!collidingWithWall) yv=-1;
    var backupY=y;
    y=Math.floor((y-12)/16)*16+12;
    if (collidingWithWall) {
      colLWall=collideable(-8,0)||collideable(-8,-15);
      colRWall=collideable(7,0)||collideable(7,-15);
      collidingWithWall=colLWall||colRWall;
      if (collidingWithWall&&!collideable(0,-16)) {
        y=backupY;
        ceilingAbove=false;
      }
    }
  }
  if (collidingWithWall) {
    if (colLWall) x=Math.ceil((x+8)/16)*16-8;
    else if (colRWall) x=Math.floor((x-8)/16)*16+8;
    else alert("wat");
    var isNotBetweenWalls=colLWall&&!(collideable(8,0)||collideable(8,-15))||colRWall&&!(collideable(-9,0)||collideable(-9,-15));
    /*if ((aD||dD)&&Math.abs(xv*100)>1&&isNotBetweenWalls) {
      if (wD&&!water&&!ceilingAbove) {
        yv+=3;
        //xv*=-1;
      }
      //else xv*=-0.5;
    }
    else*/ xv=0;
  }
  if (x<-232) x=-232;
  if (y<-172) y=-172;
  if (x>lW*16-240) x=lW*16-240;
  if (y>lH*16-180) y=lH*16-180;
  if (touchingA('lava','block')) playerData.health-=2;
  if (touchingA('fire','block')) playerData.health-=2;
  if (touchingA('acid','block')) playerData.health-=3;
  if (touchingA('acidvapour','block')) playerData.health-=1;
  if (touchingA('contaminatedwater','block')) playerData.health-=1;
  if (touchingA('heal','block')) playerData.health+=2;
  if (playerData.oxygen===0) playerData.health-=3;
  if (playerData.health<=0) {
    playerData.health=100;
    playerData.oxygen=300;
    playerData.thirst=3600;
    playerData.hunger=3600;
    x=cX;y=cY;
    xv=0;yv=0;
    document.querySelector('#label').innerHTML="You failed at life.";
    clearTimeout(timeoutId);
    timeoutId=setTimeout(function(){document.querySelector('#label').innerHTML='';},3000);
  }
  if (playerData.thirst>0) playerData.thirst--;
  else playerData.health--;
  if (playerData.hunger>0) playerData.thirst--;
  else playerData.health--;
}
function addToInv(blockName) {
  var items=blockData[blockName].drops;
  for (var item in items) {
    var count=items[item];
    if (typeof count=="string") {
      var min=Number(count.slice(0,count.indexOf("-"))),max=Number(count.slice(count.indexOf("-")+1));
      count=Math.floor(Math.random()*(max-min+1))+min;
      if (count===0) break;
    }
    if (!inv.hasOwnProperty(item)) inv[item]=0;
    inv[item]+=count;
    if (!hand1&&hand2!=item&&!qD) hand1=item;
    else if (!hand2&&hand1!=item&&!eD) hand2=item;
  }
  if (items.hasOwnProperty(hand1)||items.hasOwnProperty(hand2)) renderHands();
}
function interact() {
  var selX,selY,styX,styY;
  if (sX>lW*16-480) {
    styX=Math.round((mX+(lW*16-480)%16-8)/16)*16-(lW*16-480)%16+8;
    selX=Math.floor((lW*16-240+mX)/16);
  } else if (sX<0) {
    styX=Math.round((mX-8)/16)*16+8;
    selX=Math.floor((240+mX)/16);
  } else {
    styX=Math.round((mX+sX%16-8)/16)*16-sX%16+8;
    selX=Math.floor((sX+240+mX)/16);
  }
  if (sY>lH*16-360) {
    styY=Math.round((mY+(lH*16-360)%16-4)/16)*16-(lH*16-360)%16+8;
    selY=Math.floor((lH*16-180+mY)/16);
  } else if (sY<0) {
    styY=Math.round((mY-4)/16)*16+4;
    selY=Math.floor((180+mY)/16);
  } else {
    styY=Math.round((mY+sY%16-4)/16)*16-sY%16+4;
    selY=Math.floor((sY+180+mY)/16);
  }
  if (mineInfo.length>0) {
    if (qD||eD) {
      if (selX!=mineInfo[3]||selY!=mineInfo[4]||mineInfo[0]!=level[selY][selX]) mineInfo=[];
      else if (Date.now()>=mineInfo[1]+mineInfo[2]) {
        if (mineInfo[5]=='acidproofbucket'&&mineInfo[0]=='acid') {
          inv.acidproofbucket--;
          if (!inv.acidproofbucket) {
            delete inv.acidproofbucket;
            if ("acidproofbucket"==hand1) hand1='';
            else hand2='';
          }
          if (!inv.hasOwnProperty('bucketofacid')) inv.bucketofacid=1;
          else inv.bucketofacid++;
          if (!hand1&&hand2!='bucketofacid'&&!qD) hand1='bucketofacid';
          else if (!hand2&&hand1!='bucketofacid'&&!eD) hand2='bucketofacid';
          renderHands();
        }
        else addToInv(level[mineInfo[4]][mineInfo[3]]);
        if (mineInfo[0].slice(-7)=="treaves"&&mineInfo[0].slice(0,3)=="aut") level[mineInfo[4]][mineInfo[3]]="auttrunk";
        else if (mineInfo[0].slice(-7)=="treaves") level[mineInfo[4]][mineInfo[3]]=mineInfo[0].slice(0,-7)+"trunk";
        else level[mineInfo[4]][mineInfo[3]]="air";
        mineInfo=[];
      }
      else document.querySelector("#cursor").style.background="rgba(0, 0, 0,"+((Date.now()-mineInfo[2])/mineInfo[1])+")";
    }
    else mineInfo=[];
  } else {
    var item;
    if (qD) item=hand1;
    else if (eD) item=hand2;
    if (item&&(itemData[item].drink||itemData[item].food)&&(playerData.thirst<3000||playerData.hunger<3000)) {
      if (itemData[item].drink) {
        playerData.thirst+=itemData[item].drink;
        playerData.bladder++;
        if (playerData.thirst>3600) playerData.thirst=3600;
      }
      if (itemData[item].food) {
        playerData.hunger+=itemData[item].food;
        playerData.rectum++;
        if (playerData.hunger>3600) playerData.hunger=3600;
      }
      inv[item]--;
      if (!inv[item]) {
        delete inv[item];
        if (item==hand1) hand1='';
        else hand2='';
      }
      if (playerData.bladder>10) {
        var j=0;
        for (var i=0;i<lH;i++) {
          while (!blockData[level[Math.floor((y+180)/16)+i][Math.floor((x+240)/16)]].groundCover&&i<lH) i++;
          level[Math.floor((y+180)/16)+i][Math.floor((x+240)/16)]='urine';
          j++;
          if (j>=playerData.bladder) break;
        }
        playerData.bladder=0;
        clearTimeout(timeoutId);
        document.querySelector('#label').innerHTML='';
      } else if (playerData.bladder==10) {
        document.querySelector('#label').innerHTML='Your bladder is full and requires a micturition.';
        clearTimeout(timeoutId);
        timeoutId=setTimeout(function(){
          var j=0;
          for (var i=0;i<lH;i++) {
            while (!blockData[level[Math.floor((y+180)/16)+i][Math.floor((x+240)/16)]].groundCover&&i<lH) i++;
            level[Math.floor((y+180)/16)+i][Math.floor((x+240)/16)]='urine';
            j++;
            if (j>=10) break;
          }
          playerData.bladder=0;
          document.querySelector('#label').innerHTML='';
        },30000);
      }
      if (playerData.rectum>20) {
        var j=0;
        for (var i=0;i<lH;i++) {
          var k=Math.floor(Math.random()*3)-1;
          var i=0;
          while (!blockData[level[Math.floor((y+180)/16)+i][Math.floor((x+240)/16)+k]].groundCover&&i<lH) i++;
          level[Math.floor((y+180)/16)+i][Math.floor((x+240)/16)+k]='feces';
          j++;
          if (j>=20) break;
        }
        playerData.rectum=0;
        clearTimeout(timeoutId);
        document.querySelector('#label').innerHTML='';
      } else if (playerData.rectum==20) {
        document.querySelector('#label').innerHTML='Your bladder is full and requires a defecation.';
        clearTimeout(timeoutId);
        timeoutId=setTimeout(function(){
          var j=0;
          for (var i=0;i<lH;i++) {
            var k=Math.floor(Math.random()*3)-1;
            var i=0;
            while (!blockData[level[Math.floor((y+180)/16)+i][Math.floor((x+240)/16)+k]].groundCover&&i<lH) i++;
            level[Math.floor((y+180)/16)+i][Math.floor((x+240)/16)+k]='feces';
            j++;
            if (j>=20) break;
          }
          playerData.rectum=0;
          document.querySelector('#label').innerHTML='';
        },30000);
      }
    } else if (item&&itemData[item].place) { // place
      if (blockData[level[selY][selX]].furn) {
        document.querySelector("#cover").style.cursor="auto";
        document.querySelector("#cursor").style.display="none";
        invMode=blockData[level[selY][selX]].invmode;
        plsMakeCraftingUIAppearForMe(selY,selX);
      } else if (blockData[level[selY][selX]].groundCover) {
        if (level[selY][selX]!="air") addToInv(level[selY][selX]);
        level[selY][selX]=itemData[item].place;
        inv[item]--;
        if (!inv[item]) {
          delete inv[item];
          if (item==hand1) hand1='';
          else hand2='';
        }
        if (item=='bucketofacid') {
          if (!inv.hasOwnProperty('acidproofbucket')) inv.acidproofbucket=1;
          else inv.acidproofbucket++;
          if (!hand1&&hand2!='acidproofbucket'&&!qD) hand1='acidproofbucket';
          else if (!hand2&&hand1!='acidproofbucket'&&!eD) hand2='acidproofbucket';
        }
        renderHands();
      } else if (qD||eD) {
        var time=blockData[level[selY][selX]].mineTime,speed=1;
        if (time!=-1) {
          if (item&&itemData[item].tool&&itemData[item].tool==blockData[level[selY][selX]].tool) speed=itemData[item].toolspeed;
          mineInfo=[level[selY][selX],time*1000/speed,Date.now(),selX,selY,item];
        }
      }
    } else if (qD||eD) { // mine
      var time=blockData[level[selY][selX]].mineTime,speed=1;
      if (blockData[level[selY][selX]].furn) {
        document.querySelector("#cover").style.cursor="auto";
        document.querySelector("#cursor").style.display="none";
        invMode=blockData[level[selY][selX]].invmode;
        plsMakeCraftingUIAppearForMe(selY,selX);
      } else if (time!=-1) {
        if (item&&itemData[item].tool&&itemData[item].tool==blockData[level[selY][selX]].tool) speed=itemData[item].toolspeed;
        mineInfo=[level[selY][selX],time*1000/speed,Date.now(),selX,selY,item];
      }
    }
    if (document.querySelector("#cursor").style.background!="none") document.querySelector("#cursor").style.background="none";
  }
  document.querySelector("#cursor").style.left=styX+"px";
  document.querySelector("#cursor").style.right=-styX+"px";
  document.querySelector("#cursor").style.bottom=styY+"px";
  document.querySelector("#cursor").style.top=-styY+"px";
}
function prepareInventoryMagicness(extras) {
  var extras;
  if (!extras) extras='';
  var items=[];
  for (var item in inv) items.push(item);
  var leShtoof='<ul id="slotes">';
  for (var i=0;i<8;i++) {
    for (var j=0;j<5;j++) {
      var n="",b="";
      if (i*5+j<items.length) {
        n=inv[items[i*5+j]];
        b="background-image:url('"+itemData[items[i*5+j]].texture+"');";
      }
      leShtoof+='<li style="'+(j===0?"clear:both;":"")+b+'" class="invSlot">'+n+'</li>';
    }
  }
  leShtoof+="</ul>"+extras+"<div class='hand' id='one'></div><div class='hand' id='two'></div>";
  document.querySelector("#inv").innerHTML=leShtoof;
  if (hand1) {
    document.querySelector("#one").style.backgroundImage="url("+itemData[hand1].texture+")";
    document.querySelector("#one").innerHTML=inv[hand1];
  }
  if (hand2) {
    document.querySelector("#two").style.backgroundImage="url("+itemData[hand2].texture+")";
    document.querySelector("#two").innerHTML=inv[hand2];
  }
  var lol=function(e){
    var temp;
    if (e.keyCode==81&&hand2!=lel) {
      hand1=lel;
      temp=document.querySelector('#one');
    } else if (e.keyCode==69&&hand1!=lel) {
      hand2=lel;
      temp=document.querySelector('#two');
    } else if (e.keyCode==51) {
      document.body.removeEventListener("keydown",lol);;
    }
    if (temp!==undefined) {
      if (lel==='') {
        temp.style.backgroundImage="none";
        temp.innerHTML='';
      } else {
        temp.style.backgroundImage="url("+itemData[lel].texture+")";
        temp.innerHTML=inv[lel];
      }
    }
  }
  document.querySelector("#slotes").onmouseover=function(e){
    if (e.target.tagName=="LI") {
      var back=e.target.style.backgroundImage,name='',inner='';
      if (back!=='') {
        back=back.slice(back.indexOf('"')+1,back.lastIndexOf('"'));
        for (name in itemData) {
          if (itemData[name].texture==back) break;
        }
      }
      lel=name;
      document.body.addEventListener("keydown",lol);
      if (invMode=="inv") {
        if (e.target.innerHTML&&invPage=="inf") {
          inner+="<h1>"+name+"</h1><br>"+itemData[name].desc;
          document.querySelector('#content').style.backgroundImage="url("+back+")";
          document.querySelector('#content').innerHTML=inner;
        }
      }
    }
  };
  document.querySelector("#slotes").onmouseout=function(e){
    if (invMode=="inv") {
      if (document.querySelector('#content').innerHTML&&invPage=="inf") {
        document.querySelector('#content').innerHTML="";
        document.querySelector('#content').style.backgroundImage="none";
      }
    }
    document.body.removeEventListener("keydown",lol);
  };
}
function plsMakeCraftingUIAppearForMe(heresTheYOfTheCrafter,heresTheXOfTheCrafter) {
  if (invMode=='assemble') prepareInventoryMagicness("<ul id='availables'></ul>");
  else if (invMode=='melt') prepareInventoryMagicness("<ul id='availables'></ul>");
  else prepareInventoryMagicness();
  document.querySelector("#availables").onclick=function(e){
    if (e.target.tagName!="UL"&&e.target.className!='invname') {
      if (e.target.tagName=="LI") var item=e.target.querySelector('h1').innerHTML;
      else if (e.target.tagName=="H1") var item=e.target.innerHTML;
      function removeFromInv(item,count) {
        inv[item]-=count;
        if (!inv[item]) {
          delete inv[item];
          if (item==hand1) hand1='';
          else if (item==hand2) hand2='';
        }
      }
      if (invMode=='assemble') {
        for (var ingridient in itemData[item].ingrid) removeFromInv(ingridient,itemData[item].ingrid[ingridient]);
      }
      if (invMode=='melt') {
        removeFromInv('coal',1);
        for (var ingridient in itemData[item].metals) removeFromInv(ingridient,itemData[item].metals[ingridient]);
        var i=1;
        while (['vapour','smoke'].includes(level[heresTheYOfTheCrafter+i][heresTheXOfTheCrafter])&&i<lH) i++;
        if (blockData[level[heresTheYOfTheCrafter+i][heresTheXOfTheCrafter]].groundCover) {
          if (itemData[item].metals.water||itemData[item].metals.seawater||itemData[item].metals.contaminatedwater||itemData[item].metals.urine) level[heresTheYOfTheCrafter+i][heresTheXOfTheCrafter]='vapour';
          else level[heresTheYOfTheCrafter+i][heresTheXOfTheCrafter]='smoke';
        }
      }
      if (!inv.hasOwnProperty(item)) inv[item]=1;
      else inv[item]++;
      if (!hand1&&hand2!=item) hand1=item;
      else if (!hand2&&hand1!=item) hand2=item;
      plsMakeCraftingUIAppearForMe(heresTheYOfTheCrafter,heresTheXOfTheCrafter);
    }
  };
}
function heyCodeCanYouMakeTheInventoryAppearOnTheScreenForMe() {
  prepareInventoryMagicness("<div id='info'><ul id='tabs'><li id='inf'></li><li id='craft'></li><li id='clothes'></li><li id='menu'></li></ul><div id='content'></div></div>");
  document.querySelector("#"+invPage).className="active";
  document.querySelector("#tabs").onclick=function(e){
    if (e.target.tagName=="LI") invPage=e.target.id;
    document.querySelector(".active").className="";
    document.querySelector("#"+invPage).className="active";
    document.querySelector("#content").innerHTML="";
  };
  document.querySelector("#content").onclick=function(e){
    if (invPage=="craft") {
      if (inv.wood>=3) {
        inv.wood-=3;
        if (!inv.wood) {
          delete inv.wood;
          if ("wood"==hand1) hand1='';
          else if ("wood"==hand2) hand2='';
        }
        if (!inv.hasOwnProperty("assembler")) inv.assembler=1;
        else inv.assembler++;
        if (!hand1&&hand2!='assembler') hand1='assembler';
        else if (!hand2&&hand1!='assembler') hand2='assembler';
        heyCodeCanYouMakeTheInventoryAppearOnTheScreenForMe();
      }
    }
  };
  /*
  inv[item]--;
  if (!inv[item]) {
    delete inv[item];
    if (item==hand1) hand1='';
    else hand2='';
  }
  */
}
function inventory() {
  if (invMode=="inv") {
    if (invPage=="craft"&&!document.querySelector("#content").innerHTML) {
      if (inv.wood>=3) {
        document.querySelector("#content").innerHTML="<h1>assembler</h1><br>"+itemData.assembler.desc;
        document.querySelector('#content').style.backgroundImage="url("+itemData.assembler.texture+")";
      }
    }
  }
  if (invMode=="assemble") {
    var tempList='<h1 class="invname">Assembler</h1>';
    for (var item in itemData) {
      if (itemData[item].ingrid) {
        var ingridients=itemData[item].ingrid,allGood=true;
        for (var ingridient in ingridients) {
          if (!(inv[ingridient]>=ingridients[ingridient])) {
            allGood=false;
            break;
          }
        }
        if (allGood) tempList+='<li style="background-image:url(\''+itemData[item].texture+'\');"><h1>'+item+'</h1><br>'+itemData[item].desc+'</li>';
      }
    }
    if (tempList!=document.querySelector("#availables").innerHTML) document.querySelector("#availables").innerHTML=tempList;
  }
  if (invMode=="melt") {
    var tempList='<h1 class="invname">Melter</h1><p class="invname">Uses 1 coal for every melting.</p>';
    for (var item in itemData) {
      if (itemData[item].metals) {
        var ingridients=itemData[item].metals,allGood=true;
        if (!inv.coal) {
          allGood=false;
        } else {
          for (var ingridient in ingridients) {
            if (!(inv[ingridient]>=ingridients[ingridient])) {
              allGood=false;
              break;
            }
          }
        }
        if (allGood) tempList+='<li style="background-image:url(\''+itemData[item].texture+'\');"><h1>'+item+'</h1><br>'+itemData[item].desc+'</li>';
      }
    }
    if (tempList!=document.querySelector("#availables").innerHTML) document.querySelector("#availables").innerHTML=tempList;
  }
}
function renderHands() {
  if (hand1) {
    document.querySelector("#uno").style.backgroundImage="url("+itemData[hand1].texture+")";
    document.querySelector("#uno").innerHTML=inv[hand1];
  } else {
    document.querySelector("#uno").style.backgroundImage="none";
    document.querySelector("#uno").innerHTML='';
  }
  if (hand2) {
    document.querySelector("#two").style.backgroundImage="url("+itemData[hand2].texture+")";
    document.querySelector("#two").innerHTML=inv[hand2];
  } else {
    document.querySelector("#two").style.backgroundImage="none";
    document.querySelector("#two").innerHTML='';
  }
}
document.onmousemove=function(e){
  mX=e.clientX-window.innerWidth/2;
  mY=-e.clientY+window.innerHeight/2;
  if (Math.abs(mX)>240) mX=mX/Math.abs(mX)*240;
  if (Math.abs(mY)>180) mY=mY/Math.abs(mY)*180;
}
function test(what) {
  var what;
  if (what) console.log(what);
  clearInterval(loop);
  pausd=true;
  thisFunctionIsForDebuggingLol;
}
    </script>
<!-- MADE BY SEAN -->
  </body>
</html>
